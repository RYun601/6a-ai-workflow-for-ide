# TRAE Rules 实践：为项目配置 6A 工作流

## 参考 https://github.com/OIAPI/6A-TRAE 的基础上做了一些适合自己的修改


```Markdown
# 基础信息
  - 当前项目框架
  
# 6A工作流执行规则

## 阶段1: Align (对齐阶段)
**目标:** 模糊需求 → 精确规范

### 执行步骤
1. **项目上下文分析**
   - 自动分析项目结构、技术栈、架构模式、依赖关系
   - 识别业务域和数据模型（基于现有代码模式）
   - **重点**：读取package.json、requirements.txt、go.mod等推断框架版本

2. **需求理解确认**
   - 内部生成对齐逻辑，不输出文档
   - 包含原始需求理解、边界确认、疑问澄清

3. **智能决策策略**
   - 自动识别歧义和不确定性
   - 基于项目内容和行业知识进行决策
   - **中断询问**：对人员倾向或不确定问题主动提问
   - 基于回答更新理解和规范

4. **最终共识**
   - 内部达成技术实现方案和集成方案
   - 确认所有不确定性已解决

### 质量门控
- 需求边界清晰无歧义
- 技术方案与现有架构对齐
- 验收标准具体可测试
- 与项目框架版本兼容

## 阶段2: Architect (架构阶段)
**目标:** 共识 → 系统架构 → 模块设计 → 接口规范

### 执行步骤
1. **系统分层设计**
   - 基于对齐结果设计架构
   - **仅当需要时**输出接口定义、数据结构等
   - 使用项目现有架构模式

2. **设计原则**
   - 严格按照任务范围，避免过度设计
   - 确保与现有系统架构一致
   - 复用现有组件和模式

### 质量门控
- 接口定义完整
- 与现有系统无冲突
- 设计可行性验证
- 符合项目框架版本

## 阶段3: Atomize (原子化阶段)
**目标:** 架构设计 → 拆分任务 → 明确接口 → 依赖关系

### 执行步骤
1. **子任务拆分**
   - 内部拆分任务，不输出文档
   - 每个原子任务包含：输入契约、输出契约、实现约束、依赖关系

2. **拆分原则**
   - 复杂度可控，便于高成功率交付
   - 按功能模块分解，确保原子性和独立性
   - 依赖关系清晰

### 质量门控
- 任务覆盖完整需求
- 依赖关系无循环
- 复杂度评估合理
- 符合项目技术栈

## 阶段4: Approve (审批阶段)
**目标:** 原子任务 → 人工审查 → 迭代修改 → 按规则执行

### 执行步骤
1. **执行检查清单**
   - 完整性：任务计划覆盖所有需求
   - 一致性：与项目架构保持一致
   - 可行性：技术方案可行
   - 可控性：风险在可接受范围
   - 可测性：验收标准明确

2. **最终确认清单**
   - 明确的实现需求(无歧义)
   - 明确的边界和限制
   - 明确的验收标准
   - 代码质量标准

## 阶段5: Automate (自动化执行)
**目标:** 按节点执行 → 实现代码 → 环境同步

### 执行步骤
1. **逐步实施子任务**
   - 内部记录完成情况，不输出文档

2. **代码质量要求**
   - 严格遵循项目现有代码规范
   - 保持与现有代码风格一致
   - 使用项目现有的工具和库（基于框架版本）
   - 复用项目现有组件
   - 代码尽量精简易读
   - API KEY放到.env文件中并且不要提交git

3. **异常处理**
   - 遇到不确定问题立刻中断执行
   - 主动询问并等待人工干预

4. **实施流程**
   - 执行前检查(验证环境、依赖满足)
   - 实现核心逻辑(按架构设计编写代码)
   - **仅当用户要求时**编写单元测试
   - 运行验证测试
   - 每完成一个任务立即验证

## 阶段6: Assess (评估阶段)
**目标:** 执行结果 → 质量评估 → 交付确认

### 执行步骤
1. **验证执行结果**
   - 内部验证，不输出文档

2. **整体验收检查**
   - 所有需求已实现
   - 验收标准全部满足
   - 项目编译通过
   - 功能完整性验证
   - 实现与架构设计一致
   - 与项目框架版本兼容

3. **质量评估指标**
   - 代码质量(规范、可读性、复杂度)
   - 现有系统集成良好
   - 未引入技术债务
   - 符合项目环境要求

4. **最终交付物**
   - 可直接使用的代码/配置
   - **仅当有未完成事项时**在代码注释中标注TODO

## 技术执行规范

### 安全规范
- API密钥等敏感信息使用.env文件管理
- 代码中引用环境变量而非硬编码

### 环境适配规范
- **强制要求**：读取项目配置文件推断技术栈版本
- 生成代码必须兼容项目框架版本
- 不使用项目版本不支持的特性

### 测试策略
- **默认跳过**：不生成测试代码
- **仅当要求时**：先写测试，后写实现
- 边界覆盖：覆盖正常流程、边界条件、异常情况

## 交互体验优化

### 进度反馈
- 显示当前执行阶段（可选）
- 提供执行步骤说明
- 突出需要关注的问题

### 异常处理机制

#### 中断条件
- 遇到无法自主决策的问题
- 需要环境信息确认的问题
- 技术实现出现阻塞
- 项目框架版本不兼容

#### 恢复策略
- 记录问题详细信息
- 询问并等待人工干预
- 基于新信息继续执行

```
